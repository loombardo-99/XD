<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leitura de Ebooks - XD</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Estilos globais para o corpo da página */
        body {
            font-family: 'Roboto', sans-serif; /* Define a fonte principal */
            background-color: #000000; /* Fundo totalmente preto */
            margin: 0; /* Remove margens padrão */
            padding: 0; /* Remove preenchimento padrão */
            display: flex; /* Usa flexbox para layout */
            flex-direction: column; /* Coloca os itens em coluna */
            align-items: center; /* Centraliza os itens horizontalmente */
            justify-content: center; /* Centraliza os itens verticalmente */
            min-height: 100vh; /* Altura mínima de 100% da viewport */
            color: #ffffff; /* Cor do texto branco */
            position: relative; /* Necessário para posicionamento absoluto do menu */
            overflow-x: hidden; /* Evita rolagem horizontal */
            transition: overflow 0.3s ease; /* Transição suave para overflow */
        }

        /* Estilos para o contêiner principal do leitor de ebooks */
        .ebook-container {
            width: 90%; /* Largura de 90% */
            max-width: 900px; /* Largura máxima para o leitor */
            margin: 20px; /* Margem externa */
            padding: 20px; /* Preenchimento interno */
            background-color: rgba(0, 0, 0, 0.9); /* Fundo preto mais opaco */
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.6); /* Sombra mais pronunciada */
            border-radius: 12px; /* Cantos arredondados */
            backdrop-filter: blur(8px); /* Efeito de desfoque sutil no fundo */
            display: flex; /* Usa flexbox para layout interno */
            flex-direction: column; /* Itens em coluna */
            overflow: hidden; /* Esconde conteúdo que transborda */
            position: relative; /* Para posicionar o overlay */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Borda sutil */
        }

        /* Estilos para o menu de navegação */
        nav {
            width: 100%; /* Largura total */
            height: 100vh; /* Altura total da viewport para mobile */
            background-color: rgba(0, 0, 0, 0.98); /* Fundo preto quase opaco para o menu */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.7); /* Sombra mais intensa */
            position: fixed; /* Posição fixa na tela */
            top: 0; /* Alinhado ao topo */
            left: -100%; /* Começa fora da tela à esquerda para animação slide-in */
            z-index: 1000; /* Acima de outros elementos */
            transition: left 0.3s ease-in-out; /* Transição suave para o slide-in */
            display: flex; /* Usa flexbox para centralizar conteúdo */
            flex-direction: column; /* Itens em coluna */
            justify-content: center; /* Centraliza verticalmente */
            align-items: center; /* Centraliza horizontalmente */
            padding-top: 60px; /* Espaço para o ícone do menu no topo */
        }

        nav.open {
            left: 0; /* Desliza para dentro da tela */
        }

        nav ul {
            display: flex; /* Usa flexbox para os itens da lista */
            flex-direction: column; /* Itens em coluna para mobile */
            gap: 25px; /* Mais espaço entre os itens do menu */
            padding: 20px; /* Preenchimento interno */
            margin: 0; /* Remove margens padrão */
            list-style: none; /* Remove marcadores de lista */
            width: 100%; /* Ocupa a largura total do nav */
            align-items: center; /* Centraliza os itens */
        }

        nav ul li {
            margin: 0; /* Remove margens padrão */
        }

        nav ul li a {
            text-decoration: none; /* Remove sublinhado */
            color: #ffffff; /* Cor do texto branco */
            font-weight: 400; /* Peso da fonte normal */
            font-size: 1.2rem; /* Tamanho da fonte maior para mobile */
            transition: color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease; /* Transição suave */
            padding: 15px 20px; /* Adiciona preenchimento para área de clique */
            border-radius: 8px; /* Cantos arredondados */
            display: block; /* Torna o link um bloco para preencher o espaço */
            text-align: center; /* Centraliza o texto do link */
        }

        nav ul li a:hover {
            color: #ffd700; /* Cor amarela ao passar o mouse */
            transform: translateY(-3px); /* Efeito de leve elevação */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3); /* Efeito de brilho amarelo */
        }

        /* Estilos para o cabeçalho do leitor */
        .ebook-header {
            text-align: center; /* Centraliza o texto */
            margin-bottom: 20px; /* Margem inferior */
            color: #ffffff; /* Cor do texto branco */
        }

        .ebook-header h1 {
            border: 1px solid rgba(255, 255, 255, 0.1); /* Borda branca muito sutil */
            padding: 15px; /* Preenchimento interno */
            border-radius: 12px; /* Cantos arredondados */
            background-color: rgba(0, 0, 0, 0.7); /* Fundo preto semi-transparente */
            font-size: 1.8rem; /* Tamanho da fonte */
            font-weight: 300; /* Fonte mais leve */
        }

        /* Área de conteúdo do ebook */
        .ebook-content {
            height: 450px; /* Altura fixa para o conteúdo do ebook */
            overflow-y: auto; /* Adiciona scroll vertical se o conteúdo for maior */
            border: 1px solid rgba(255, 255, 255, 0.2); /* Borda branca sutil */
            padding: 20px; /* Preenchimento interno */
            border-radius: 12px; /* Cantos arredondados */
            background-color: rgba(255, 255, 255, 0.05); /* Fundo branco muito transparente */
            line-height: 1.6; /* Espaçamento entre linhas para melhor leitura */
            font-size: 1rem; /* Tamanho da fonte padrão */
            color: #ffffff; /* Cor do texto branco */
            text-align: justify; /* Justifica o texto */
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5); /* Sombra interna sutil */
            scroll-behavior: smooth; /* Rolagem suave */
        }

        /* Estilos da barra de rolagem (WebKit) */
        .ebook-content::-webkit-scrollbar {
            width: 8px; /* Largura da barra de rolagem */
        }

        .ebook-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05); /* Fundo da trilha da barra de rolagem */
            border-radius: 10px;
        }

        .ebook-content::-webkit-scrollbar-thumb {
            background: #ffd700; /* Cor do "polegar" da barra de rolagem */
            border-radius: 10px;
        }

        .ebook-content::-webkit-scrollbar-thumb:hover {
            background: #ffcc00; /* Cor ao passar o mouse */
        }

        /* Controles de navegação e configurações */
        .ebook-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            gap: 15px;
            flex-wrap: wrap; /* Permite que os itens quebrem linha em telas pequenas */
        }

        .ebook-controls button,
        .ebook-controls select {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ebook-controls button {
            background-color: #ffd700;
            color: #000000;
        }

        .ebook-controls button:hover {
            background-color: #ffcc00;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(255, 215, 0, 0.3);
        }

        .ebook-controls select {
            background-color: rgba(0, 0, 0, 0.85);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.3);
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%23ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 16px auto;
            padding-right: 35px;
        }

        .ebook-controls select:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
        }

        /* Estilos para o select dentro do menu (reutilizado) */
        .menu-select {
            background-color: rgba(0, 0, 0, 0.85); /* Fundo preto semi-transparente */
            color: #ffffff; /* Cor do texto branco */
            border: 1px solid rgba(255, 255, 255, 0.3); /* Borda branca sutil */
            border-radius: 12px; /* Cantos arredondados */
            padding: 8px 15px; /* Preenchimento interno maior */
            font-weight: 400; /* Peso da fonte normal */
            font-size: 1rem;
            cursor: pointer; /* Cursor de ponteiro */
            appearance: none; /* Remove o estilo padrão do select */
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%23ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>'); /* Ícone de seta para baixo */
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 16px auto;
            padding-right: 35px; /* Espaço para o ícone */
            transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .menu-select:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.2); /* Brilho sutil no hover */
        }

        /* Estilos para o ícone do menu */
        .menu-icon {
            display: block; /* Exibe como bloco */
            font-size: 30px; /* Tamanho da fonte */
            cursor: pointer; /* Cursor de ponteiro */
            color: #ffffff; /* Cor branca */
            position: fixed; /* Posição fixa na tela */
            top: 15px; /* 15px do topo */
            left: 15px; /* 15px da esquerda */
            z-index: 1100; /* Acima do menu */
            transition: color 0.3s ease, transform 0.2s ease; /* Transição suave */
        }

        .menu-icon:hover {
            color: #ffd700; /* Cor amarela ao passar o mouse */
            transform: scale(1.1); /* Aumenta um pouco o tamanho */
        }

        /* Overlay de fundo quando o menu está aberto */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6); /* Fundo escuro semi-transparente */
            z-index: 999; /* Abaixo do menu, mas acima do restante do conteúdo */
            display: none; /* Escondido por padrão */
            animation: fadeInOverlay 0.3s ease-in-out forwards;
            opacity: 0;
        }

        .overlay.active {
            display: block;
            opacity: 1;
        }

        /* Estilos para a área de pesquisa */
        .search-area {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 600px; /* Largura máxima para a barra de pesquisa */
        }

        .search-area input {
            flex: 1;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s ease, background-color 0.3s ease;
        }

        .search-area input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .search-area input:focus {
            border-color: #ffd700;
            background-color: rgba(255, 255, 255, 0.05);
        }

        .search-area button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            background-color: #ffd700;
            color: #000000;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .search-area button:hover {
            background-color: #ffcc00;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(255, 215, 0, 0.3);
        }

        /* Estilos para os resultados da pesquisa */
        .search-results {
            background-color: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px; /* Altura máxima para os resultados */
            overflow-y: auto;
            color: #ffffff;
            display: none; /* Escondido por padrão */
            flex-direction: column;
            gap: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .search-results.active {
            display: flex; /* Exibe quando há resultados */
        }

        .search-result-item {
            background-color: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .search-result-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .search-result-item h3 {
            margin-top: 0;
            margin-bottom: 8px;
            color: #ffd700;
            font-size: 1.1rem;
        }

        .search-result-item p {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 10px;
        }

        .search-result-item .read-button {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background-color: #ffd700;
            color: #000000;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .search-result-item .read-button:hover {
            background-color: #ffcc00;
            transform: translateY(-1px);
        }

        /* Indicador de carregamento */
        .loading-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #ffd700;
            font-size: 1.2rem;
            gap: 10px;
            display: none; /* Escondido por padrão */
        }

        .loading-indicator.active {
            display: flex;
        }

        .loading-indicator .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #ffd700;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Media queries para responsividade */
        @media (min-width: 769px) {
            /* Estilos para desktop: menu no topo e centralizado */
            nav {
                height: auto; /* Altura automática para desktop */
                top: 0;
                left: 50%;
                transform: translateX(-50%);
                border-radius: 0 0 12px 12px; /* Cantos arredondados na parte inferior */
                padding-top: 0; /* Remove padding extra do topo */
                display: block; /* Exibe o menu por padrão no desktop */
                opacity: 1; /* Garante visibilidade */
                animation: none; /* Remove animação de slide-in */
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); /* Sombra mais leve para desktop */
            }

            nav ul {
                flex-direction: row; /* Itens em linha para desktop */
                justify-content: space-around; /* Espaçamento uniforme */
                padding: 15px;
                gap: 0; /* Remove gap extra */
            }

            nav ul li a {
                font-size: 1rem; /* Tamanho da fonte padrão para desktop */
                padding: 5px 10px; /* Padding padrão para desktop */
            }

            .menu-icon {
                display: none; /* Esconde o ícone do menu no desktop */
            }

            .overlay {
                display: none !important; /* Garante que o overlay não apareça no desktop */
            }
        }

        /* Animações */
        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="overlay" id="overlay"></div>

    <span class="menu-icon" onclick="toggleMenu()">&#9776;</span>
    <nav id="main-nav">
        <ul>
            <li><a href="home.html">Assistente</a></li>
            <li><a href="leitura.html">Leitura</a></li>
            <li><a href="comunidade.html">Comunidade</a></li>
            <li><a href="editor.html">Editor</a></li>
            <li>
                <select onchange="handleMenuSelection(this.value)" class="menu-select">
                    <option value="perfil.html" disabled selected>Perfil</option>
                    <option value="configuracoes.html">Configurações</option>
                    <option value="politicas.html">Políticas de Privacidade</option>
                    <option value="index.html">Sair</option>
                </select>
            </li>
        </ul>
    </nav>
    <div class="ebook-container">
        <div class="search-area">
            <input type="text" id="search-input" placeholder="Pesquisar livros na internet..." onkeypress="handleSearchKeyPress(event)">
            <button onclick="searchBooks()"><i class="fas fa-search"></i> Buscar</button>
        </div>

        <div class="ebook-header">
            <h1 id="ebook-title">Título do Ebook</h1>
        </div>
        <div class="ebook-content" id="ebook-content">
            <p>Este é um parágrafo de exemplo para o seu ebook. Você pode carregar o conteúdo real do seu ebook aqui. O design é minimalista e focado na legibilidade, com um fundo escuro para reduzir o cansaço visual, especialmente em ambientes com pouca luz.</p>
            <p>A navegação entre as páginas pode ser feita pelos botões abaixo. Os controles de fonte e tema permitem personalizar sua experiência de leitura. Nosso objetivo é proporcionar um ambiente limpo e sem distrações para que você possa se concentrar totalmente na sua leitura.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            <p>Curabitur pretium tincidunt lacus. Nulla gravida orci a odio. Nullam varius, turpis et commodo pharetra, est eros bibendum elit, nec luctus magna felis sollicitudin mauris. Integer in mauris eu nibh euismod gravida. Duis ac tellus et risus auctor iaculis. Mauris vel nisl. Cras a nunc. Donec adipiscing mollis scelerisque. Sed mollis, eros et ultrices tempus, mauris ipsum aliquam nulla, at volutpat sem arcu sed ipsum. Donec non dolor. In hac habitasse platea dictumst. Aliquam eu elit. Nunc sed elit. Donec at odio sit amet nibh vulputate cursus. Nulla facilisi. Fusce at massa sed arcu egestas.</p>
            <p>Praesent dapibus, neque id cursus faucibus, tortor neque egestas augu, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus. Phasellus ultrices nulla quis nibh. Quisque a lectus. Donec consectetuer ligula vulputate sem tristique cursus. Nam nulla quam, gravida non, commodo a, sodales sit amet, nisi. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis vitae, aliquam et, ultrices in, mauris. Sed adipiscing ornare risus. Morbi est est, blandit sit amet, sagittis vel, adipiscing non, dolor. Sed in justo. Phasellus at dolor in nisl iaculis egestas. Nulla facilisi. Etiam id elit, et ac facilisis turpis.</p>
            <p>Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In hac habitasse platea dictumst. Mauris non ligula. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam.</p>
        </div>
        <div class="ebook-controls">
            <button onclick="prevPage()"><i class="fas fa-arrow-left"></i> Página Anterior</button>
            <select id="font-size-select" onchange="changeFontSize(this.value)">
                <option value="1.0rem" selected>Tamanho da Fonte</option>
                <option value="0.9rem">Pequena</option>
                <option value="1.0rem">Média</option>
                <option value="1.1rem">Grande</option>
                <option value="1.2rem">Extra Grande</option>
            </select>
            <select id="theme-select" onchange="changeTheme(this.value)">
                <option value="dark" selected>Tema</option>
                <option value="dark">Escuro</option>
                <option value="light">Claro</option>
                <option value="sepia">Sépia</option>
            </select>
            <button onclick="nextPage()">Próxima Página <i class="fas fa-arrow-right"></i></button>
        </div>

        <div class="search-results" id="search-results">
            </div>

        <div class="loading-indicator" id="loading-indicator">
            <div class="spinner"></div>
            <span>Buscando livros...</span>
        </div>
    </div>
    <script>
        // Função para alternar a visibilidade do menu
        function toggleMenu() {
            const nav = document.getElementById('main-nav');
            const overlay = document.getElementById('overlay');
            if (nav.classList.contains('open')) {
                nav.classList.remove('open');
                overlay.classList.remove('active');
                document.body.style.overflow = ''; // Reabilita a rolagem do corpo
            } else {
                nav.classList.add('open');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden'; // Desabilita a rolagem do corpo quando o menu está aberto
            }
        }

        // Fecha o menu se clicar fora dele ou no overlay
        document.addEventListener('click', function(event) {
            const nav = document.getElementById('main-nav');
            const menuIcon = document.querySelector('.menu-icon');
            const overlay = document.getElementById('overlay');

            // Verifica se o clique não foi no menu nem no ícone do menu
            if (nav.classList.contains('open') && !nav.contains(event.target) && !menuIcon.contains(event.target)) {
                nav.classList.remove('open');
                overlay.classList.remove('active');
                document.body.style.overflow = ''; // Reabilita a rolagem do corpo
            }
        });

        // Função para lidar com a seleção do menu (redirecionamento)
        function handleMenuSelection(value) {
            if (value) {
                window.location.href = value;
            }
        }

        // --- Funções Específicas do Ebook Reader ---
        const ebookContent = document.getElementById('ebook-content');
        const ebookTitle = document.getElementById('ebook-title');
        let currentPage = 0;
        const pages = []; // Array para armazenar o conteúdo das páginas

        // Simula o carregamento de conteúdo e divisão em páginas
        function loadEbookContent() {
            // Para este exemplo, o conteúdo é estático.
            // Em uma aplicação real, você carregaria o texto de um arquivo ou API.
            const initialText = `Este é um parágrafo de exemplo para o seu ebook. Você pode carregar o conteúdo real do seu ebook aqui. O design é minimalista e focado na legibilidade, com um fundo escuro para reduzir o cansaço visual, especialmente em ambientes com pouca luz.

            A navegação entre as páginas pode ser feita pelos botões abaixo. Os controles de fonte e tema permitem personalizar sua experiência de leitura. Nosso objetivo é proporcionar um ambiente limpo e sem distrações para que você possa se concentrar totalmente na sua leitura.

            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

            Curabitur pretium tincidunt lacus. Nulla gravida orci a odio. Nullam varius, turpis et commodo pharetra, est eros bibendum elit, nec luctus magna felis sollicitudin mauris. Integer in mauris eu nibh euismod gravida. Duis ac tellus et risus auctor iaculis. Mauris vel nisl. Cras a nunc. Donec adipiscing mollis scelerisque. Sed mollis, eros et ultrices tempus, mauris ipsum aliquam nulla, at volutpat sem arcu sed ipsum. Donec non dolor. In hac habitasse platea dictumst. Aliquam eu elit. Nunc sed elit. Donec at odio sit amet nibh vulputate cursus. Nulla facilisi. Fusce at massa sed arcu egestas.

            Praesent dapibus, neque id cursus faucibus, tortor neque egestas augu, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus. Phasellus ultrices nulla quis nibh. Quisque a lectus. Donec consectetuer ligula vulputate sem tristique cursus. Nam nulla quam, gravida non, commodo a, sodales sit amet, nisi. Pellentesque fermentum dolor. Aliquam quam lectus, facilisis vitae, aliquam et, ultrices in, mauris. Sed adipiscing ornare risus. Morbi est est, blandit sit amet, sagittis vel, adipiscing non, dolor. Sed in justo. Phasellus at dolor in nisl iaculis egestas. Nulla facilisi. Etiam id elit, et ac facilisis turpis.

            Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In hac habitasse platea dictumst. Mauris non ligula. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam. Sed quis diam.`;

            ebookContent.innerHTML = ''; // Limpa o conteúdo para recarregar paginado
            pages.length = 0; // Limpa o array de páginas

            // Simples divisão de páginas por parágrafos para melhor legibilidade
            const paragraphs = initialText.split('\n').filter(p => p.trim() !== '');
            let currentPageContent = '';
            const maxCharsPerPage = 1000; // Limite de caracteres por página

            paragraphs.forEach(p => {
                if ((currentPageContent + p).length < maxCharsPerPage) {
                    currentPageContent += `<p>${p}</p>`;
                } else {
                    pages.push(currentPageContent);
                    currentPageContent = `<p>${p}</p>`;
                }
            });
            if (currentPageContent) {
                pages.push(currentPageContent);
            }
            displayPage(currentPage);
        }

        function displayPage(pageNumber) {
            if (pages[pageNumber]) {
                ebookContent.innerHTML = pages[pageNumber];
                currentPage = pageNumber;
                ebookContent.scrollTop = 0; // Rola para o topo da nova página
            }
        }

        function nextPage() {
            if (currentPage < pages.length - 1) {
                displayPage(currentPage + 1);
            }
        }

        function prevPage() {
            if (currentPage > 0) {
                displayPage(currentPage - 1);
            }
        }

        function changeFontSize(size) {
            ebookContent.style.fontSize = size;
        }

        function changeTheme(theme) {
            // Remove classes de tema existentes
            document.body.classList.remove('dark-theme', 'light-theme', 'sepia-theme');
            ebookContent.classList.remove('dark-theme', 'light-theme', 'sepia-theme');

            // Adiciona a classe do novo tema
            if (theme === 'dark') {
                document.body.style.backgroundColor = '#000000';
                ebookContent.style.backgroundColor = 'rgba(255, 255, 255, 0.05)';
                ebookContent.style.color = '#ffffff';
            } else if (theme === 'light') {
                document.body.style.backgroundColor = '#f0f0f0';
                ebookContent.style.backgroundColor = '#ffffff';
                ebookContent.style.color = '#333333';
            } else if (theme === 'sepia') {
                document.body.style.backgroundColor = '#fbf0d9';
                ebookContent.style.backgroundColor = '#fbf0d9';
                ebookContent.style.color = '#5a4632';
            }
        }

        // --- Funções de Pesquisa de Livros ---
        const searchInput = document.getElementById('search-input');
        const searchResultsContainer = document.getElementById('search-results');
        const loadingIndicator = document.getElementById('loading-indicator');

        async function searchBooks() {
            const searchTerm = searchInput.value.trim();
            if (!searchTerm) {
                searchResultsContainer.innerHTML = '<p style="text-align: center; color: rgba(255,255,255,0.7);">Por favor, digite um termo de pesquisa.</p>';
                searchResultsContainer.classList.add('active');
                return;
            }

            searchResultsContainer.innerHTML = ''; // Limpa resultados anteriores
            searchResultsContainer.classList.remove('active');
            loadingIndicator.classList.add('active'); // Mostra o indicador de carregamento

            try {
                const searchQueries = [
                    searchTerm + " livro",
                    searchTerm + " resumo livro",
                    searchTerm + " sinopse livro"
                ];

                // Simulação de pesquisa na internet (substitua por uma API real como Google Books API)
                // Para este exemplo, vamos simular respostas com base no termo de pesquisa.
                const simulatedResults = {
                    "harry potter": [
                        {
                            title: "Harry Potter e a Pedra Filosofal",
                            author: "J.K. Rowling",
                            description: "Um órfão descobre que é um bruxo no seu décimo primeiro aniversário e é enviado para Hogwarts, uma escola de magia e bruxaria."
                        },
                        {
                            title: "Harry Potter e a Câmara Secreta",
                            author: "J.K. Rowling",
                            description: "No seu segundo ano em Hogwarts, Harry descobre que uma câmara secreta foi aberta, liberando um monstro que petrifica os alunos."
                        }
                    ],
                    "senhor dos aneis": [
                        {
                            title: "O Senhor dos Anéis: A Sociedade do Anel",
                            author: "J.R.R. Tolkien",
                            description: "Um hobbit chamado Frodo Bolseiro herda um anel mágico e embarca em uma perigosa jornada para destruí-lo e salvar a Terra Média."
                        }
                    ],
                    "inteligencia artificial": [
                        {
                            title: "Inteligência Artificial: Uma Abordagem Moderna",
                            author: "Stuart Russell, Peter Norvig",
                            description: "Um livro abrangente que cobre os fundamentos da inteligência artificial, desde busca e raciocínio lógico até aprendizado de máquina e redes neurais."
                        },
                        {
                            title: "A Revolução da Inteligência Artificial",
                            author: "Kai-Fu Lee",
                            description: "Uma análise sobre como a IA está transformando o mundo, com foco nos avanços na China e nos EUA e seu impacto na sociedade."
                        }
                    ],
                    "clean code": [
                        {
                            title: "Clean Code: A Handbook of Agile Software Craftsmanship",
                            author: "Robert C. Martin",
                            description: "Um guia prático para escrever código limpo, legível e de fácil manutenção, essencial para desenvolvedores de software."
                        }
                    ],
                    "default": [
                        {
                            title: `Livro sobre "${searchTerm}"`,
                            author: "Autor Desconhecido",
                            description: `Nenhum resumo específico encontrado para "${searchTerm}", mas aqui está um exemplo de resultado. Em uma aplicação real, você integraria uma API de pesquisa de livros.`
                        }
                    ]
                };

                await new Promise(resolve => setTimeout(resolve, 1500)); // Simula delay da rede

                let results = simulatedResults[searchTerm.toLowerCase()] || simulatedResults["default"];

                if (results.length > 0) {
                    results.forEach(book => {
                        const resultItem = document.createElement('div');
                        resultItem.classList.add('search-result-item');
                        resultItem.innerHTML = `
                            <h3>${book.title}</h3>
                            <p><strong>Autor:</strong> ${book.author}</p>
                            <p>${book.description}</p>
                            <button class="read-button" onclick="loadBookContent('${encodeURIComponent(book.title)}', '${encodeURIComponent(book.description)}')">Ler Resumo</button>
                        `;
                        searchResultsContainer.appendChild(resultItem);
                    });
                    searchResultsContainer.classList.add('active');
                } else {
                    searchResultsContainer.innerHTML = '<p style="text-align: center; color: rgba(255,255,255,0.7);">Nenhum livro encontrado para este termo.</p>';
                    searchResultsContainer.classList.add('active');
                }
            } catch (error) {
                console.error('Erro ao pesquisar livros:', error);
                searchResultsContainer.innerHTML = '<p style="text-align: center; color: #ff6347;">Ocorreu um erro ao buscar livros. Tente novamente.</p>';
                searchResultsContainer.classList.add('active');
            } finally {
                loadingIndicator.classList.remove('active'); // Esconde o indicador de carregamento
            }
        }

        // Carrega o resumo do livro selecionado para a área de leitura
        function loadBookContent(title, description) {
            ebookTitle.textContent = decodeURIComponent(title);
            ebookContent.innerHTML = `<p>${decodeURIComponent(description)}</p><p>Para uma experiência de leitura completa, esta seção seria expandida com o conteúdo real do livro.</p>`;
            ebookContent.scrollTop = 0; // Rola para o topo do conteúdo do livro
            searchResultsContainer.classList.remove('active'); // Esconde os resultados da pesquisa
            searchInput.value = ''; // Limpa o campo de pesquisa
            
            // Recarrega o conteúdo de exemplo do ebook após 3 segundos, ou você pode manter o resumo
            // setTimeout(() => {
            //     ebookTitle.textContent = "Título do Ebook";
            //     loadEbookContent();
            // }, 3000); 
        }

        function handleSearchKeyPress(event) {
            if (event.key === 'Enter') {
                searchBooks();
            }
        }

        // Carrega o conteúdo do ebook quando a página é carregada
        window.onload = loadEbookContent;
    </script>
</body>
</html>
